# 遺伝的アルゴリズム可視化アプリケーション

2次元実数値関数の最適化問題を遺伝的アルゴリズムで解き、その収束過程をリアルタイムで可視化するWebアプリケーションです。

## 特徴

- **複数の最適化関数**:
  - **Sphere関数**: f(x,y) = x² + y² の最小値探索
  - **Rosenbrock関数**: f(x,y) = (1-x)² + 100(y-x²)² の最小値探索
- **リアルタイム可視化**: 世代ごとの個体分布と収束過程を2Dグラフで表示
- **等高線表示**: 選択した関数の等高線を背景に表示
- **統計情報**: 最良適応度・平均適応度の推移をグラフで表示
- **インタラクティブ制御**:
  - アニメーション速度調整、ステップ実行機能
  - パラメータのリアルタイム調整（個体数、世代数、関数選択）
  - 入力値の自動検証とクランプ機能

## 技術仕様

### 遺伝的アルゴリズム
- **個体数**: 1-1000（デフォルト: 100）
- **変数範囲**:
  - Sphere関数: x, y ∈ [-10, 10]
  - Rosenbrock関数: x, y ∈ [-2, 2]
- **選択手法**: トーナメント選択（サイズ: 3）
- **交叉手法**: BLX-α交叉（α = 0.5）
- **突然変異**: ガウシアン変異（突然変異率: 0.1）
- **世代数**: 1-1000（デフォルト: 50）

### 技術スタック
- **フロントエンド**: SolidJS + TypeScript
- **可視化**: Canvas API
- **ビルドツール**: Vite
- **コード品質**: Biome (linting, formatting)
- **テスト**: Vitest + Testing Library
- **スタイリング**: CSS3

## セットアップ

### 必要な環境
- Node.js 18+
- npm

### インストールと実行

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# 本番ビルド
npm run build

# プレビュー
npm run serve

# テスト実行
npm run test

# コード品質チェック
npm run lint          # linting
npm run format        # formatting
npm run check         # lint + format チェック
npm run check:fix     # 自動修正
```

開発サーバー起動後、ブラウザで `http://localhost:3000` にアクセスしてください。

## 使い方

### 基本操作
1. **最適化関数の選択**: ドロップダウンからSphere関数またはRosenbrock関数を選択
2. **パラメータ設定**:
   - 個体数（1-1000）
   - 世代数（1-1000）
   - ※実行中はパラメータ変更不可
3. **実行制御**:
   - **開始**: 遺伝的アルゴリズムの自動実行開始
   - **停止**: 実行を一時停止
   - **ステップ**: 1世代ずつ手動実行
   - **リセット**: 初期状態に戻す
4. **速度調整**: スライダーでアニメーション速度を調整（50ms〜2000ms）

## 可視化の見方

### メイン可視化パネル
- **青い点**: 通常の個体（各個体の座標位置）
- **赤い点**: 各世代の最良個体（最小適応度を持つ個体）
- **等高線**: 選択した関数の等高線（関数の地形を表示）
- **座標軸**: X軸・Y軸の数値スケール

### 統計情報
- **世代**: 現在の世代数
- **最良個体**: 座標と適応度を詳細表示
- **平均適応度**: 全個体の平均適応度

### 適応度推移グラフ
- **赤線**: 最良適応度の推移（各世代のベストスコア）
- **青線**: 平均適応度の推移（集団全体の平均性能）

## ファイル構成

```
src/
├── genetic-algorithm.ts      # 遺伝的アルゴリズムの実装
├── genetic-algorithm.test.ts # 単体テスト
├── visualizer.tsx            # Canvas可視化コンポーネント
├── ga-app.tsx               # メインアプリケーション
├── ga-app.css               # スタイルシート
└── index.tsx                # エントリーポイント
```

## カスタマイズ

### アルゴリズムパラメータ
`src/genetic-algorithm.ts` の `DEFAULT_CONFIG` を変更することで、以下のパラメータを調整できます：

- `populationSize`: 個体数（1-1000）
- `generations`: 世代数（1-1000）
- `mutationRate`: 突然変異率（0.0-1.0、デフォルト: 0.1）
- `crossoverRate`: 交叉率（0.0-1.0、デフォルト: 0.8）
- `tournamentSize`: トーナメントサイズ（デフォルト: 3）
- `functionType`: 最適化関数（"sphere" | "rosenbrock"）
- `bounds`: 変数の範囲（関数タイプに応じて自動設定）

### UI制約
- 個体数・世代数の範囲は `ga-app.tsx` で定義されている定数で制御
- 入力値は自動的に有効範囲内にクランプされる
- 実行中はパラメータ変更が無効化される

## テスト

包括的な単体テストが含まれています：

```bash
# テスト実行
npm run test

# テストカバレッジ付き実行
npm run test -- --coverage
```

テスト内容：
- 各最適化関数の数値計算テスト
- 遺伝的操作（選択・交叉・突然変異）の検証
- 境界値処理・パラメータ検証
- 統計処理・進化過程の検証
